<!DOCTYPE html>
<html lang="en-us">
    
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link rel="icon" href="assets/images/favicon.ico">
    <title>PlannerTESTsignin</title>
    <!-- reset CSS  -->
    <link rel="stylesheet" type="text/css" href="assets/css/reset.css">
    <!-- My CSS Style -->
    <link rel="stylesheet" type="text/css" href="assets/css/style.css">
    <!-- meta tags for responsive layout (to different media)-->
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">  
    <!-- Moment JS -->
    <script src="https://cdn.jsdelivr.net/momentjs/2.12.0/moment.min.js"></script>
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
    <!-- Bootstrap-->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <!-- Firebase Reference from my firebase-->
    <script src="https://www.gstatic.com/firebasejs/5.2.0/firebase.js"></script>
    <script src="https://cdn.firebase.com/libs/firebaseui/2.5.1/firebaseui.js"></script>
    <link type="text/css" rel="stylesheet" href="https://cdn.firebase.com/libs/firebaseui/2.5.1/firebaseui.css" />  

</head>


<style>
        .form-group {
          margin: 25px 25%;
          width:25%;
        }
      
        img{
        width:300px;
          height:250px;
        }
      
        #weatherContainer{
          width:75px;
          height:75px;
          margin-left:40%;
        }
      
        
</style>
      
      
      
        <body> 
      
                                  <!-- Option 1 using open wheaather API-->
          <img src="" id="weatherContainer" alt="image"><span id="data"></span><span id="unit">&#8457</span>
      
          
      
      
                                
          
          <a class="weatherwidget-io" href="https://forecast7.com/en/n33d87151d21/sydney/" data-label_1="SYDNEY" data-label_2="WEATHER" data-theme="original" >SYDNEY WEATHER</a>
          <script>
          !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src='https://weatherwidget.io/js/widget.min.js';fjs.parentNode.insertBefore(js,fjs);}}(document,'script','weatherwidget-io-js');
          </script>
      
      
      
              <div class="form-group">
                  <input type="text" class="form-control" id="general-input">
              </div>
      
              <div class="form-group">
                  <button class="btn btn-secondary" id="add-item">Search</button>
              </div>
      
      
              <div id="imgdisplay">        </div>
    
      
              <script>
      
      
      
      
      
              var inputGeneral = "toronto";
      
                  weatherInfo();
      
              // var inputGeneral="";
              var addItem = $("#add-item");
      
              addItem.on("click", function(event) {
      
              $('#imgdisplay').empty()
            
              event.preventDefault();
      
              // function searcResult(){  
               // for testing input 
      
                var apiKey="AIzaSyD2x_ZyJ8j79AlvEU-ShEqiCRUKJRZI4rs";
                var cx = '005057676442827486311:eycndy5i2cg';// custom search engine ID
      
                inputGeneral = $("#general-input").val().trim();
                alert(inputGeneral)
               var queryURL="https://www.googleapis.com/customsearch/v1?key=" + apiKey + "&cx=" + cx + "&q=" + inputGeneral + "&searchType=image&num=10";
      
                $.ajax({
                url: queryURL,
                method: "GET"
                }).then(function(response) {
      
                  for(i=0;i<response.items.length;i++)
      
                  {
      
                  var result= response.items[i].link
      
                  var img= $('<img>').attr('src',result)
      
      
      
                console.log(response);
      
                $('#imgdisplay').append(img)
      
                  }
      
          
            })
      
            weatherInfo();
      
      
              });
      
      
              function weatherInfo(){
      
      
                  var apiKey="a08b8fa46ac3e7c9dc12040793090199";
      
                  var city=inputGeneral
      
                  var queryURL="https://api.openweathermap.org/data/2.5/weather?q=" + city + "&units=metric&APPID=" + apiKey
      
                  $.ajax({
                  url: queryURL,
                  method: "GET"
                  }).then(function(response) {
      
                  console.log(response);
      
                  var attr = 'https://openweathermap.org/img/w/'+response.weather[0].icon+'.png';
      
                  var temp = response.main.temp;
      
                  //alert(temp)
      
                  $('#weatherContainer').attr('src',attr);
      
                  $('#data').text(temp);
      
                    })
      

              }


</script>
    
</body>

</html>